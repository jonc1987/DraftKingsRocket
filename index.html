<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Neon Rocket Run</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;700&family=Rajdhani:wght@500;600&display=swap');

    :root {
      --lift: 0px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 20% 20%, hsl(210, 90%, 25%), hsl(255, 92%, 8%));
      color: #f3f8ff;
      font-family: 'Orbitron', 'Rajdhani', 'Segoe UI', sans-serif;
      transition: background 0.6s ease;
      padding: 24px;
    }

    .game-wrapper {
      width: min(540px, 94vw);
      background: linear-gradient(160deg, rgba(6, 10, 32, 0.95) 0%, rgba(11, 18, 46, 0.88) 55%, rgba(6, 9, 24, 0.92) 100%);
      border: 1px solid rgba(0, 255, 209, 0.16);
      border-radius: 24px;
      box-shadow: 0 25px 90px rgba(3, 6, 18, 0.85), inset 0 0 24px rgba(0, 233, 255, 0.08);
      padding: 36px 32px;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(8px);
    }

    .game-wrapper::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at top, rgba(0, 255, 209, 0.14), transparent 60%);
      pointer-events: none;
    }

    h1 {
      font-size: clamp(28px, 5vw, 36px);
      text-transform: uppercase;
      letter-spacing: 4px;
      margin: 0 0 12px;
      text-align: center;
      color: #00ffd1;
      text-shadow: 0 0 22px rgba(0, 255, 209, 0.6);
    }

    .subtitle {
      font-size: 14px;
      text-align: center;
      color: rgba(214, 235, 255, 0.72);
      margin-bottom: 28px;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .stage {
      position: relative;
      height: 280px;
      border-radius: 18px;
      border: 1px solid rgba(0, 255, 209, 0.18);
      background: linear-gradient(180deg, rgba(10, 14, 34, 0.85) 0%, rgba(5, 8, 20, 0.92) 75%, rgba(2, 4, 12, 0.98) 100%);
      overflow: hidden;
      box-shadow: inset 0 0 24px rgba(0, 255, 209, 0.08);
    }

    .starfield {
      position: absolute;
      inset: 0;
      background-image: radial-gradient(1px 1px at 20% 20%, rgba(255, 255, 255, 0.5), transparent),
        radial-gradient(1px 1px at 80% 50%, rgba(255, 255, 255, 0.4), transparent),
        radial-gradient(2px 2px at 40% 80%, rgba(255, 255, 255, 0.35), transparent);
      background-size: 160px 220px;
      opacity: 0.65;
      filter: blur(0.3px);
      animation: twinkle 8s linear infinite;
      pointer-events: none;
    }

    @keyframes twinkle {
      0%, 100% {
        transform: translateY(0);
        opacity: 0.75;
      }
      50% {
        transform: translateY(-12px);
        opacity: 0.55;
      }
    }

    .rocket {
      position: absolute;
      bottom: 62px;
      left: 50%;
      width: 72px;
      height: 140px;
      transform: translate(-50%, var(--lift, 0px));
      transition: transform 0.18s linear, filter 0.24s ease, opacity 0.24s ease;
      z-index: 2;
    }

    .rocket-body {
      position: relative;
      height: 100%;
      width: 100%;
      border-radius: 36px 36px 20px 20px;
      background: linear-gradient(160deg, #f4f5ff 0%, #cfd4f9 40%, #9ea9ff 70%, #3e4bff 100%);
      border: 2px solid rgba(255, 255, 255, 0.18);
      box-shadow: 0 20px 40px rgba(70, 107, 255, 0.3);
      overflow: hidden;
    }

    .rocket-body::before {
      content: "";
      position: absolute;
      inset: 12px 12px auto 12px;
      height: 52px;
      border-radius: 24px;
      background: radial-gradient(circle at 50% 30%, rgba(25, 31, 78, 0.95), rgba(3, 7, 32, 0.9));
      box-shadow: 0 0 14px rgba(0, 255, 209, 0.45) inset;
    }

    .rocket-body::after {
      content: "";
      position: absolute;
      bottom: -24px;
      left: 50%;
      transform: translateX(-50%);
      width: 34px;
      height: 42px;
      border-radius: 50%;
      background: linear-gradient(180deg, rgba(255, 156, 0, 0.92) 0%, rgba(255, 42, 42, 0.88) 65%, rgba(255, 0, 0, 0) 100%);
      filter: blur(0.6px);
      animation: flame 0.18s ease-in-out infinite alternate;
    }

    @keyframes flame {
      0% {
        transform: translateX(-50%) scaleY(1);
        opacity: 0.92;
      }
      100% {
        transform: translateX(-50%) scaleY(1.35);
        opacity: 0.5;
      }
    }

    .rocket.fin-left,
    .rocket.fin-right {
      position: absolute;
      bottom: 32px;
      width: 36px;
      height: 32px;
      background: linear-gradient(140deg, rgba(63, 91, 255, 0.8), rgba(13, 25, 92, 0.9));
      border-radius: 10px;
      filter: drop-shadow(0 8px 14px rgba(34, 79, 255, 0.42));
    }

    .rocket.fin-left {
      left: calc(50% - 44px);
      transform: rotate(-15deg);
    }

    .rocket.fin-right {
      left: calc(50% + 8px);
      transform: rotate(15deg);
    }

    .launch-pad {
      position: absolute;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      width: 160px;
      height: 28px;
      background: linear-gradient(180deg, rgba(18, 22, 48, 0.85), rgba(6, 9, 24, 0.92));
      border: 1px solid rgba(0, 255, 209, 0.12);
      border-radius: 16px;
      box-shadow: 0 12px 26px rgba(0, 0, 0, 0.4);
    }

    .multiplier-display {
      margin: 20px auto 12px;
      font-size: clamp(48px, 8vw, 64px);
      font-weight: 700;
      color: #ffffff;
      text-shadow: 0 0 16px rgba(0, 255, 209, 0.65);
      display: flex;
      justify-content: center;
      align-items: baseline;
      gap: 6px;
    }

    .multiplier-display span {
      font-size: 22px;
      color: rgba(211, 248, 255, 0.78);
      letter-spacing: 2px;
    }

    .controls {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      align-items: end;
      margin-top: 12px;
    }

    label {
      display: block;
      text-align: left;
      font-size: 12px;
      letter-spacing: 1.4px;
      color: rgba(197, 227, 255, 0.68);
      margin-bottom: 6px;
      text-transform: uppercase;
    }

    input[type="number"] {
      width: 100%;
      background: rgba(4, 8, 22, 0.9);
      border: 1px solid rgba(0, 255, 209, 0.22);
      border-radius: 12px;
      padding: 12px 14px;
      font-size: 16px;
      color: #f6fdff;
      font-family: 'Rajdhani', sans-serif;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    input[type="number"]:focus {
      border-color: rgba(0, 255, 209, 0.5);
      box-shadow: 0 0 0 3px rgba(0, 255, 209, 0.18);
      outline: none;
    }

    .buttons {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 12px;
      margin-top: 14px;
    }

    button {
      padding: 14px 18px;
      border-radius: 14px;
      font-size: 16px;
      font-weight: 600;
      letter-spacing: 1.4px;
      text-transform: uppercase;
      border: none;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.2s ease;
      font-family: 'Orbitron', sans-serif;
    }

    .btn-launch {
      background: linear-gradient(120deg, rgba(0, 255, 209, 0.95), rgba(0, 170, 255, 0.9));
      color: #03111d;
      box-shadow: 0 18px 38px rgba(0, 207, 255, 0.32);
    }

    .btn-launch:disabled {
      background: rgba(37, 64, 86, 0.45);
      color: rgba(165, 196, 212, 0.6);
      box-shadow: none;
      cursor: not-allowed;
    }

    .btn-cashout {
      background: linear-gradient(120deg, rgba(255, 230, 0, 0.92), rgba(255, 145, 0, 0.9));
      color: #2e1300;
      box-shadow: 0 18px 32px rgba(255, 170, 0, 0.28);
    }

    .btn-cashout:disabled {
      background: rgba(82, 61, 18, 0.45);
      color: rgba(255, 214, 150, 0.54);
      box-shadow: none;
      cursor: not-allowed;
    }

    button:not(:disabled):active {
      transform: translateY(1px) scale(0.995);
    }

    button:not(:disabled):hover {
      box-shadow: 0 20px 40px rgba(0, 255, 209, 0.3);
    }

    .status {
      margin-top: 20px;
      padding: 16px;
      border-radius: 14px;
      background: rgba(5, 12, 24, 0.72);
      border: 1px solid rgba(0, 255, 209, 0.12);
      min-height: 52px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      justify-content: center;
    }

    .status .message {
      font-size: 16px;
      letter-spacing: 1.2px;
    }

    .status .message.win {
      color: #56ffc5;
      text-shadow: 0 0 16px rgba(86, 255, 197, 0.5);
    }

    .status .message.lose {
      color: #ff6b88;
      text-shadow: 0 0 16px rgba(255, 107, 136, 0.5);
    }

    .status .detail {
      font-size: 13px;
      color: rgba(189, 216, 255, 0.6);
      letter-spacing: 1.4px;
      text-transform: uppercase;
    }

    .leaderboard {
      margin-top: 18px;
      padding: 14px;
      border-radius: 12px;
      background: rgba(0, 14, 34, 0.6);
      border: 1px solid rgba(0, 255, 209, 0.18);
      font-size: 13px;
      letter-spacing: 1.6px;
      color: rgba(211, 240, 255, 0.75);
      text-transform: uppercase;
    }

    .rocket.launched .rocket-body::after {
      animation-duration: 0.12s;
    }

    .rocket.cashed .rocket-body {
      box-shadow: 0 0 38px rgba(0, 255, 209, 0.65);
    }

    .rocket.exploding {
      animation: explode 0.6s ease-out forwards;
      filter: brightness(1.25) saturate(1.3);
    }

    @keyframes explode {
      0% {
        transform: translate(-50%, var(--lift)) scale(1);
        opacity: 1;
      }
      40% {
        transform: translate(-50%, var(--lift)) scale(1.12) rotate(8deg);
        opacity: 1;
      }
      100% {
        transform: translate(-50%, var(--lift)) scale(1.5) rotate(-12deg);
        opacity: 0;
      }
    }

    .shake {
      animation: shake 0.35s linear infinite;
    }

    @keyframes shake {
      0%, 100% {
        transform: translate(-50%, calc(var(--lift) + 0px));
      }
      25% {
        transform: translate(-50%, calc(var(--lift) + 4px));
      }
      75% {
        transform: translate(-50%, calc(var(--lift) - 4px));
      }
    }

    @media (max-width: 520px) {
      .game-wrapper {
        padding: 32px 22px;
      }
      .controls {
        grid-template-columns: 1fr;
      }
      .buttons {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="game-wrapper">
    <h1>Neon Rocket Run</h1>
    <div class="subtitle">Launch, ride the multiplier, and cash out before the boom.</div>
    <div class="stage">
      <div class="starfield"></div>
      <div class="rocket fin-left"></div>
      <div class="rocket fin-right"></div>
      <div id="rocket" class="rocket">
        <div class="rocket-body"></div>
      </div>
      <div class="launch-pad"></div>
    </div>

    <div class="multiplier-display" id="multiplierDisplay">1.00<span>x</span></div>

    <div class="controls">
      <div class="control">
        <label for="betAmount">Bet Amount ($)</label>
        <input type="number" id="betAmount" min="1" step="0.5" value="10" />
      </div>
      <div class="control">
        <label for="autoCash">Auto Cash Out (optional)</label>
        <input type="number" id="autoCash" min="1" step="0.01" placeholder="e.g. 2.5" />
      </div>
    </div>

    <div class="buttons">
      <button id="launchBtn" class="btn-launch">Launch</button>
      <button id="cashOutBtn" class="btn-cashout" disabled>Cash Out</button>
    </div>

    <div class="status">
      <div id="statusMessage" class="message">Place your bet and hit Launch.</div>
      <div id="statusDetail" class="detail">Multiplier explodes somewhere between 1.00x and 100.00x.</div>
    </div>

    <div class="leaderboard" id="leaderboard">Highest Multiplier Reached: 1.00x</div>
  </div>

  <script>
    (function () {
      const multiplierEl = document.getElementById('multiplierDisplay');
      const rocketEl = document.getElementById('rocket');
      const launchBtn = document.getElementById('launchBtn');
      const cashOutBtn = document.getElementById('cashOutBtn');
      const betInput = document.getElementById('betAmount');
      const autoCashInput = document.getElementById('autoCash');
      const statusMessage = document.getElementById('statusMessage');
      const statusDetail = document.getElementById('statusDetail');
      const leaderboard = document.getElementById('leaderboard');

      let multiplier = 1;
      let growthRate = 0.015;
      let intervalId = null;
      let explosionPoint = 2;
      let betValue = 0;
      let state = 'idle';
      let highestMultiplier = 1;
      let autoCashTarget = null;
      let audioCtx = null;

      const clamp = (value, min, max) => Math.max(min, Math.min(max, value));

      function playTone(frequency, duration, type = 'sine') {
        try {
          if (!audioCtx) {
            const AudioContextClass = window.AudioContext || window.webkitAudioContext;
            if (AudioContextClass) {
              audioCtx = new AudioContextClass();
            } else {
              return;
            }
          }
          if (audioCtx.state === 'suspended') {
            audioCtx.resume();
          }
          const now = audioCtx.currentTime;
          const oscillator = audioCtx.createOscillator();
          const gain = audioCtx.createGain();
          oscillator.type = type;
          oscillator.frequency.setValueAtTime(frequency, now);
          gain.gain.setValueAtTime(0.0001, now);
          gain.gain.exponentialRampToValueAtTime(0.28, now + 0.02);
          gain.gain.exponentialRampToValueAtTime(0.0001, now + duration);
          oscillator.connect(gain);
          gain.connect(audioCtx.destination);
          oscillator.start(now);
          oscillator.stop(now + duration + 0.05);
        } catch (err) {
          console.warn('Audio unavailable', err);
        }
      }

      function formatCurrency(amount) {
        return amount.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
      }

      function setMultiplierDisplay(value) {
        multiplierEl.textContent = value.toFixed(2) + 'x';
      }

      function updateRocketPosition(currentMultiplier) {
        const lift = clamp((currentMultiplier - 1) * 34, 0, 220);
        rocketEl.style.setProperty('--lift', `${-lift}px`);
      }

      function updateBackground(currentMultiplier) {
        const hue = Math.round(200 + clamp(currentMultiplier, 0, 20) * 7);
        const hue2 = (hue + 60) % 360;
        document.body.style.background = `radial-gradient(circle at 20% 20%, hsl(${hue}, 90%, 24%), hsl(${hue2}, 92%, 9%))`;
      }

      function updateDetail(text) {
        statusDetail.textContent = text;
      }

      function resetStatusClasses() {
        statusMessage.classList.remove('win', 'lose');
      }

      function prepareForLaunch() {
        if (state !== 'idle') {
          return;
        }
        const bet = parseFloat(betInput.value);
        if (Number.isNaN(bet) || bet <= 0) {
          statusMessage.textContent = 'Enter a valid bet amount to play.';
          resetStatusClasses();
          return;
        }

        betValue = bet;
        const autoValue = parseFloat(autoCashInput.value);
        autoCashTarget = Number.isFinite(autoValue) && autoValue >= 1 ? autoValue : null;
        multiplier = 1;
        growthRate = 0.015;
        explosionPoint = parseFloat((Math.random() * 99 + 1).toFixed(2));
        state = 'running';

        launchBtn.disabled = true;
        cashOutBtn.disabled = false;
        betInput.disabled = true;
        autoCashInput.disabled = true;
        rocketEl.classList.remove('exploding', 'cashed');
        rocketEl.classList.add('launched');
        resetStatusClasses();
        statusMessage.textContent = 'Rocket climbing...';
        updateDetail(`Mystery crash point armed. Cash out in time!`);
        playTone(480, 0.25, 'triangle');
        setMultiplierDisplay(multiplier);
        updateBackground(multiplier);
        updateRocketPosition(multiplier);

        if (intervalId) {
          clearInterval(intervalId);
        }
        intervalId = setInterval(stepGame, 50);
      }

      function stepGame() {
        multiplier += multiplier * growthRate;
        growthRate = clamp(growthRate + 0.0012, 0.01, 0.08);

        if (multiplier >= explosionPoint) {
          multiplier = explosionPoint;
          renderMultiplierState();
          triggerExplosion();
          return;
        }

        renderMultiplierState();

        if (autoCashTarget && multiplier >= autoCashTarget) {
          triggerCashOut(true);
        }
      }

      function renderMultiplierState() {
        setMultiplierDisplay(multiplier);
        updateRocketPosition(multiplier);
        updateBackground(multiplier);
      }

      function triggerCashOut(isAuto = false) {
        if (state !== 'running') {
          return;
        }
        state = 'ended';
        clearInterval(intervalId);
        intervalId = null;
        cashOutBtn.disabled = true;
        rocketEl.classList.add('cashed');
        rocketEl.classList.remove('launched');

        const winnings = betValue * multiplier;
        resetStatusClasses();
        statusMessage.classList.add('win');
        statusMessage.textContent = `You Won $${formatCurrency(winnings)}!`;
        updateDetail(`${isAuto ? 'Auto ' : ''}Cash Out at ${multiplier.toFixed(2)}x`);
        playTone(740, 0.35, 'sawtooth');

        updateHighestMultiplier(multiplier);
        scheduleReset();
      }

      function triggerExplosion() {
        if (state !== 'running') {
          return;
        }
        state = 'ended';
        clearInterval(intervalId);
        intervalId = null;
        cashOutBtn.disabled = true;

        rocketEl.classList.remove('launched');
        rocketEl.classList.add('exploding');

        resetStatusClasses();
        statusMessage.classList.add('lose');
        statusMessage.textContent = 'You Lost! The rocket exploded!';
        updateDetail(`Crash multiplier: ${multiplier.toFixed(2)}x`);
        playTone(160, 0.45, 'square');

        updateHighestMultiplier(multiplier);
        scheduleReset();
      }

      function updateHighestMultiplier(value) {
        if (value > highestMultiplier) {
          highestMultiplier = value;
          leaderboard.textContent = `Highest Multiplier Reached: ${highestMultiplier.toFixed(2)}x`;
        }
      }

      function scheduleReset() {
        setTimeout(() => {
          resetGame();
        }, 2800);
      }

      function resetGame() {
        clearInterval(intervalId);
        intervalId = null;
        state = 'idle';
        multiplier = 1;
        growthRate = 0.015;
        setMultiplierDisplay(multiplier);
        updateBackground(multiplier);
        updateRocketPosition(multiplier);
        launchBtn.disabled = false;
        cashOutBtn.disabled = true;
        betInput.disabled = false;
        autoCashInput.disabled = false;
        rocketEl.classList.remove('exploding', 'cashed', 'launched');
        resetStatusClasses();
        statusMessage.textContent = 'Place your bet and hit Launch.';
        updateDetail('Multiplier explodes somewhere between 1.00x and 100.00x.');
      }

      launchBtn.addEventListener('click', prepareForLaunch);
      cashOutBtn.addEventListener('click', () => triggerCashOut(false));

      // Keyboard accessibility for quick cash out
      document.addEventListener('keydown', (event) => {
        if (event.code === 'Space' || event.code === 'Enter') {
          if (state === 'idle') {
            prepareForLaunch();
          } else if (state === 'running') {
            triggerCashOut(false);
          }
          event.preventDefault();
        }
      });

      // Initialize UI
      resetGame();
    })();
  </script>
</body>
</html>
